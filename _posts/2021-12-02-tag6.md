---
title: "Tag 6"
date: 2021-12-02
---
_Liebes Tagebuch_,



**Zwischenstand**


Was wir bisher gemacht haben:
1.  Wir haben die Demo von DSpace getestet und in der Übung Daten aus DSpace über die OAI-PMH-Schnittstelle abgerufen.
Nun wollen wir auch die OAI-PMH-Schnittstellen von unseren lokal installierten Systemen Koha und ArchivesSpace abrufen.
2.  Dann bearbeiten wir die Daten mit marcEdit.
3.  Morgen schauen dann noch die Software OpenRefine an und verwenden dazu weitere Beispieldaten.

DSpace ging auch über Demo mit oai-pmh, darum haben wir diese ja dann gespeichert, weil jede Woche ändert sich, darum kann man nicht mit vufind harvest sondern copy paste manuell von Browser in Textdatei gemacht, aber das was rausgekommen ist, sind Dublin Core Daten in xml format.
Hier meine Metadaten aus DSpace, diese mussten wir im gemeinsamen Dokument einfügen:

![dspace in gemeinsame](https://user-images.githubusercontent.com/90834735/150531068-68bdbdf7-4e04-48b0-9c21-6e6fc1f3b509.png)





Beispiel die BASE (Bielefeld Universität)
Hier werden Daten auch über eine PMH Schnittstelle Daten generieren, täglich aktuell wäre so ein Beispiel, vermutlich über 90% Daten eingesammelt über OAHI-pmh

**Wir machen heute Crosswalks**
Zuerst Theorie zu Crosswalks: Mit Crosswalks sind gemeint Datenformate zu ändern. Wir wollen Metadatenformate von einem Format in ein anderes Metadatenformat bringen. Zum Beispiel Dspace von dublin core zu xml machen.
Crosswalks beinhaltet Regeln, z.b. EAD in Marc21 zugeordnet werden können, ist ein Metadatastandard in XML Format. 
wir machen heute folgendes:
- **EAD (Archive Spaces) --> in MARC21**
- **MARC21   --->in MARC XML**
- **DUBLIN CORE (dspace) -->in MARC21** 
- **(Koha ist schon in Marc21 darum muss man dort nichts machen)**

**EAD für Archive**
**MARC21 für Bibliothek**
_**Es ist nicht so einfach EAD in MARC21 verlustfrei zu importieren!**_


**Alternative: anstatt Crosswalks gibt es auch noch XSLT:**

das ist eine Programmiersprache zur Transformation von XML-Dokumenten (W3C Empfehlung, 1999)
Literaturempfehlung für Einstieg in XSLT: https://programminghistorian.org/en/lessons/transforming-xml-with-xsl




**Wie man  Dublin Core (DC) in Marc 21 konvertieren kann**:
Kein Problem weil DC hat viele gemeinsame Felder, Marc 21 mit Titel und so 
DC  hat 1000 solche Kernfelder und Marc 21 hat nur 12 Felder
Wenn jetzt von 1000 Felder auf 12 Felder dann gäb es ja Probleme diese in in nur 12 Felder ausdrücken.
Von Dublin Core zu Marc 21 geht nicht gut. In Dublin Core Namenfeld und marc 21 würde dann Familienname und Vorname und so ändern, dann müsste man jedes Mal entscheiden.
Erfahrung: man findet zwar fertige Crosswalks, aber man muss Daten anschauen und prüfen.

In welches Feld kommt dann bei MARC21 der Titel, dann wäre es 245 a aber muss in Spezifikaton nachlesen, kann ich anhand eines Trennzeichens eines Punkt das in 245 a (titel) und 245b  (untertitel) aufteilen oder kann gar nicht trennen.
 
Autor wäre bei Marc 21 --->     100a

 
Bei so einem Mapping gibt’s eben dann die Probleme oder man könnte ein Excel machen,und dann alles so zuordnen.
Gibt so Regeln auch auf W3C, in Skriptsprache…

Darum gibt es eben so Software wie die von  marc Edit, welche hilft beim Mapping, um die Crosswalks von einem Metadata-Format zu ändern. 



**VU FIND HARVESTER**-**Ernten von koha und archive space mit dem vufind harvesting**

**_STROMAUSFALL_**: Weil ich am Morgen früh aufgestanden bin und plötzlich einen Stromausfall hatte, habe ich den Anschluss verpasst, weil der Elektriker kam und dann erst um ca. 8.45 Uhr ich wieder Strom hatte, da ich einen Kurzschluss hatte. Zum Glück half mir Hr. Lohmeier beim "Harvesting" der KOHA eigenen Metadaten und den ArchivesSpace eigenen Metadaten. Vielen Dank nochmals für die Hilfe von Hr. Lohmeier!

**Theorie zu Austauschprotokolle für Metadaten (OAI-PMH, SRU)**

Es gibt 3 bekannte Austauschprotokolle, zum austauschen von Metadaten:

- Z39.50 (Library of Congress)    --> ist sehr alt, aber immer noch im Einsatz als Ergängzung zum SRU
- SRU - Search/Retrieve via URL (Library of Congress)--> Live-Abfragen oder gezielte Datenabruf mit vielen Parameter
- OAI-PMH - Open Archives Initiative Protocol for Metadata Harvesting (Open Archives Initiative)  ---> eignet sich für viele Parameter, grössere Datenabzüge, Aktualisierungen
Das Praktische an SRU und OAI-PMH ist, dass die Anfragen als Internetadresse (URL) zusammengestellt werden können und direkt über den Browser ohne Zusatzsoftware aufrufbar sind.


1. Zuerst musste man die Schnittstellen von KOHA und Archive Space wieder aufrufen überOAI-PMH Endpoints

    - Koha sollte noch laufen
        http://bibliothek.meine-schule.org/cgi-bin/koha/oai.pl
        Meldung No verb supplied ist OK
        Format: marcxml
        
    - ArchivesSpace muss ggf. gestartet werden
        http://localhost:8082
        Meldung Parameter required but no value provided ist OK
        Format: oai ead
        ![starten archive space](https://user-images.githubusercontent.com/90834735/150541084-cadc220f-27ed-4e36-8e61-7a0984d577f0.png)

       



2. Wichtig war es diese  Änderungen der  example Server umwandeln das heisst auf "bin meine schule" ...umzuändern, und auch  ansonsten wäre es nicht möglich gewesen
cd ~/vufindharvest-4.1.0
php bin/harvest_oai.php --url=http://example.com/oai_server --metadataPrefix=oai_dc my_target_dir



3. Dann musste ändern auf "binmeine Schule" und auch die Endungen also bei **koha auf marc xml** und beim **archive space auf oai ead** umbenennen

![bin endungen umbennen](https://user-images.githubusercontent.com/90834735/150534895-605b1960-47e1-4121-a2e3-a47858e89e95.png)



4. danach wurde der VU-Find  Harvester 4.1.0 installiert

    Die Software wird bei GitHub veröffentlicht: https://github.com/vufind-org/vufindharvest
    Sie ist in PHP geschrieben. Für die Installation wird composer (Paketverwaltung für PHP) empfohlen.

    - sudo apt update
    - sudo apt install composer php php-xml
    - cd ~
    - wget https://github.com/vufind-org/vufindharvest/archive/v4.1.0.zip
    - unzip v4.1.0.zip
    - cd vufindharvest-4.1.0
    - composer install
    
![63 packete u bin harvest](https://user-images.githubusercontent.com/90834735/150533002-02e3ae41-d218-457d-a78c-c353b44782b0.png)

5. Ernte / Harvesting machen im Vu Find

**Hier die Ernte  aus dem KOHA, ich erkenne die Daten wieder**
![vufind koha harvesting](https://user-images.githubusercontent.com/90834735/150522124-d363c12a-5a3d-472e-9524-8172fa4f1451.png)



hier die einzelne Datei:
![Screenshot from 2021-12-02 12-10-20](https://user-images.githubusercontent.com/90834735/144411325-7b83c980-2637-4d67-be7b-4185a166cbd0.png)





**AHA- Moment******Hier die aus dem Archives Spaces, auch hier erkenne ich die Metadaten wieder:**
![vufind harvesting archive space](https://user-images.githubusercontent.com/90834735/150521868-2dd14566-bd31-4285-b75e-3295f8dabdfc.png)




hier die einzelne Datei:
![Screenshot from 2021-12-02 12-08-58](https://user-images.githubusercontent.com/90834735/144411105-b08216ed-a43b-4973-98d3-81cfde5327ef.png)





**Installation von marc edit auf der shell zum die Crosswalks   (von ead in marc21, von marc 21 zu xml, von dc in marc21  etc.)  zu machen

MarcEdit 7 installieren
MarcEdit ist eine kostenlos nutzbare Software aber nicht Open Source (siehe Lizenz)
Sie ist die meistgenutzte Zusatzsoftware für die Arbeit mit MARC21.
Offizielle Webseite: https://marcedit.reeset.net
Installation von Mono (MarcEdit ist in .NET geschrieben und benötigt unter Linux diese Laufzeitumgebung) und des Unicode Fonts “Noto”

    Installation von MarcEdit:

    cd ~
    wget https://marcedit.reeset.net/software/marcedit7/marcedit7.run
    chmod +x marcedit7.run
    mkdir ~/marcedit
    ./marcedit7.run --target ~/marcedit
    
    
man musste noch etwas ändern, weil die Einstellungen für Linux fehlerhaft waren
    **MarcEdit konfigurieren**

        MARC Tools
        Button Tools / Edit XML Function List
        Für die benötigten Funktionen (EAD=>MARC und OAIDC=>MARCXML):
            Im Menü “Defined Functions” die gewünschte Funktion auswählen und Modify klicken
            Unter XSLT/XQuery Path XSLT\ durch xslt/ ersetzen
            Anschließend “Save” und für nächste Funktion wiederholen

    
Start Marc Edit:
![marceditläuft](https://user-images.githubusercontent.com/90834735/150541486-1f18e9b5-83de-4f4b-a170-6411881f9871.png)

![aussicht marcedit](https://user-images.githubusercontent.com/90834735/150533667-a364c3fb-6a89-4766-b37e-41da5c3e01f8.png)

Hier die Übersicht von MarcEdit, ich kann einfach auswählen, welche Dateien ich die Formate konvertieren möchte:
![vufind harvesting übersicht](https://user-images.githubusercontent.com/90834735/150533576-12b0e7bd-d67d-481d-ab4e-890811ae1b57.png)


**Konfigurieren mit der Beispieldatei im Format EAD in MArc21 dann in Marc xml ging soweit gut**. 
ich wähle von EAD zu Marc 21 aus:
![ead zu marc start](https://user-images.githubusercontent.com/90834735/150537327-89feef3d-77e8-4c73-b6a8-7898378f27fc.png)


![konvertieren ead zu marc](https://user-images.githubusercontent.com/90834735/150536839-9cf57045-668f-4f53-9a57-8d7711e88a4c.png)



hier war es erst in marc21 noch nicht so lesbar:
![Screenshot from 2021-12-02 12-04-57](https://user-images.githubusercontent.com/90834735/144410505-f9c306ae-a5af-4b5f-8826-500d6d3d560a.png)

jetzt muss ich von marc 21 auf marc 21 xml auswählen um nochmals zu konvertieren:
![marc21 zu marc21xml](https://user-images.githubusercontent.com/90834735/150538136-fc223526-8abf-4fb2-9b6f-5be412e8a444.png)



**AHA-Moment**: Hier das Beispiel nun in marc xml, viel lesbarer:



![Screenshot from 2021-12-02 11-56-30](https://user-images.githubusercontent.com/90834735/144409887-4707648e-f54c-4ece-b074-e9b3c3341bc6.png)


**archivesspace  von ead in marc21 und dann in marc 21 xml formatieren mit der marc edit:**
Jetzt wollte ich noch mit meinen eigenen Daten abrufen und konvertieren in marc xml,  die ich ja vorher geerntet habe.
![ead zu marc2](https://user-images.githubusercontent.com/90834735/150536044-785a5e13-3b31-4fb2-9e3c-3d05ffdbeef1.png)



auf dem Desktop habe ich sie gefunden, sieht aber noch unlesbar aus, weil noch im marc21 sind (man kann eben nur auswählen von ead in marc21 und nicht direkt in marc xml:
![Screenshot from 2021-12-02 12-40-53](https://user-images.githubusercontent.com/90834735/144415427-1b22b9a7-e0c5-4557-8a49-619676f47679.png)

nun mache ich sie von marc21 in marc xml:


so sieht es dann aus, ist auch lesbar, und ich erkenne sie wieder
![Screenshot from 2021-12-02 12-47-10](https://user-images.githubusercontent.com/90834735/144416291-153d43a4-7f44-4e19-a17b-a2fd6da4c1cf.png)

oder hier als copy paste/ das war mein Eintrag im Archive Space zu Albert Hoffmann, es hat alle Felder genommen, weil von EAD in Marc21 geändert habe.

<?xml version="1.0" encoding="UTF-8" ?><marc:collection xmlns:marc="http://www.loc.gov/MARC21/slim" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.loc.gov/MARC21/slim http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd">
<marc:record><marc:leader>00407ntc a2200121Ia 4500</marc:leader>
<marc:controlfield tag="008">040320u9999    xx            000 0 eng d</marc:controlfield>
<marc:datafield tag="040" ind1=" " ind2=" "><marc:subfield code="a">ORE</marc:subfield><marc:subfield code="e">dacs</marc:subfield><marc:subfield code="c">ORE</marc:subfield></marc:datafield><marc:datafield tag="099" ind1=" " ind2=" "><marc:subfield code="a">ARCH-MSS</marc:subfield></marc:datafield><marc:datafield tag="245" ind1="1" ind2="0"><marc:subfield code="a">Biografisches Dossier zu Albert Hofmann (1906- 2008),</marc:subfield></marc:datafield><marc:datafield tag="300" ind1=" " ind2=" "><marc:subfield code="1"> Sheets.</marc:subfield></marc:datafield><marc:datafield tag="546" ind1=" " ind2=" "><marc:subfield code="a">Materials in German</marc:subfield></marc:datafield><marc:datafield tag="555" ind1=" " ind2=" "><marc:subfield code="a">Finding aid available in the University Archives and on its World Wide Web site.</marc:subfield></marc:datafield><marc:datafield tag="856" ind1="4" ind2="2"><marc:subfield code="u"></marc:subfield><marc:subfield code="z">View the EAD finding aid.</marc:subfield></marc:datafield></marc:record>
</marc:collection>



**Anmerkung: Daten von dspace von Format dublin core in marc 21 ändern, ging nicht, wegen der oai-pmh Schnittstelle?**
![dublincore zu marc](https://user-images.githubusercontent.com/90834735/150537209-09082120-0657-43cd-9743-88a9948a6685.png)



Tschau liebes Tagebuch!
